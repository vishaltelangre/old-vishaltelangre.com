<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8"/>
  <link rel="chrome-webstore-item"
      href="https://chrome.google.com/webstore/detail/mahcbjpopcainjkjlfpgdbmifboeefap">
  <title>Demo :: Oh My Radio</title>
  <style type="text/css">
    body {
      background-image: url('data:image/png;base64,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');
      font-family: sans-serif;
    }
    #ohMyRadio {
      border: 1px solid #ddd;
      padding: 10px;
      background: #eee;
      width: 40%;
      margin: 10px auto;
      text-align: center;
      line-height: 30px;
      box-shadow: 8px 7px 15px #ddd;
      border-radius: 10px;
    }
    .infoBar {
    color: #999;
    box-shadow: 0px 30px 33px #ddd inset;
    font-size: 80%;
    width: 50%;
    margin: 0 auto;
    border-radius: 12px;
    line-height: 20px;
    }
    .stationInfo {
      font-size: 110%;
      color: #666;
      font-weight: bold;
      text-shadow: 4px 4px 3px #aaa;
    }
    .currentSong {
      font-size: 110%;
      color: #555;
      text-shadow: 3px 3px 2px #aaa;
      width: 270px;
    }
    .currentListeners { font-size: 75%; }
    button {
      border: 1px solid #aaa;
      border-radius: 5px;
      color: #555;
      box-shadow: 1px 1px 3px #444;
      cursor: pointer;
      text-align: center;
      text-shadow: 1px 1px 0px #fff;
    }
    .getNowPlaying {
        border: 1px solid #ccc;
	color: #444;
	box-shadow: inset 2px 2px 4px #fff;
	border-radius: 5px;
	padding: 1px;
	margin: 0px;
	font-size: 75%;
	cursor: pointer;
    }

    button:active {
      box-shadow: inset 1px 1px 2px #333;
    }
    .volumeStatus {
      font-size: 80%;
      color: #aaa;
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 3px;
      cursor: default;
      box-shadow: inset 2px 2px 5px #888;
    }
    .seperator {
      display: inline;
      border-right: 2px solid #ccc;
      margin: 5px;
      box-shadow: -1px 1px 2px #888;
    }
    .controls-help span {
      font-size: 75%;
      color: #999;
      cursor: help;
    }
    .controls-help span code {
      padding: 3px;
      border: 1px solid #ddd;
      margin: 2px;
    }
    #footer {
      position:fixed;
      text-align: center;
      font-size: 12px;
      font-weight: bold;
      left:0px;
      bottom:10px;
      height:30px;
      width:100%;
      background:#eee;
    }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
</head>
<body>
  <script src="http://vishaltelangre.com/projects/oh-my-radio/js/libs/soundmanager/soundmanager2.js"></script>
  <script src="http://vishaltelangre.com/projects/oh-my-radio/js/libs/jquery-animateoverflow.js"></script>
  <script src="http://vishaltelangre.com/projects/oh-my-radio/js/OhMyRadio.js"></script>
  <script>
   function animateSongTitle(){
           $('#ohMyRadio .currentSong').animateOverflow({
            animation : 'pingpong',
            step_speed : 30,
            delay      : 600,
            divider    : ' ~~ '
          });
   }

    soundManager.setup({
      useConsole: false,
      debugMode: false,
      url: 'swf/',
      flashVersion: 9,
      useFlashBlock: false,
      debugFlash: false
    });

    $(document).ready(function(){

      var playPauseBtn = $('#ohMyRadio .playPause'),
          nextBtn = $('#ohMyRadio .next'),
          prevBtn = $('#ohMyRadio .prev'),
          incrVolBtn = $('#ohMyRadio .incrVol'),
          decrVolBtn = $('#ohMyRadio .decrVol'),
          stationInfo = $('#ohMyRadio .stationInfo'),
          currentVol = $('#ohMyRadio .currentVol'),
          initRun = false,
          currentStationUrl = '';

      // Configure OhMyRadio
      soundManager.onready(function(){
        var config = {
          stations: {
            Radio_Rivendell: "http://91.121.140.11:8000"
          },
          volume: 10
        };
        var initStation = OhMyRadio.init(config);

        // create player ui
        $(stationInfo).text(Object.keys(initStation)[0].split("_").join(" "));

        if(!initRun){
	  setTimeout(function(){
             pollStats(initStation[Object.keys(initStation)[0]], true);
             $('.currentSong').text("Loading...");
             initRun = true;
          },
	  500);
        }

        // attach button listeners
        $(playPauseBtn).on('click', function(e){
          e.preventDefault();
          var currentStatus = OhMyRadio.togglePlay();
          $(this).text( currentStatus === 0 ? "Pause" : "Play");
        });
        $(nextBtn).on('click', function(e){
          e.preventDefault();
          var stationInfo = OhMyRadio.nextStation();
          $('#ohMyRadio .stationInfo').text(Object.keys(stationInfo)[0].split("_").join(" "));
          pollStats(stationInfo[Object.keys(stationInfo)[0]], true);
        });
        $(prevBtn).on('click', function(e){
          e.preventDefault();
          var stationInfo = OhMyRadio.prevStation();
          $('#ohMyRadio .stationInfo').text(Object.keys(stationInfo)[0].split("_").join(" "));
	  pollStats(stationInfo[Object.keys(stationInfo)[0]], true);
        });
        $(incrVolBtn).on('click', function(e){
          e.preventDefault();
          var currentVol = OhMyRadio.increaseVolume();
          $('#ohMyRadio .currentVol').text(currentVol);
        });
        $(decrVolBtn).on('click', function(e){
          e.preventDefault();
          var currentVol = OhMyRadio.decreaseVolume();
          $('#ohMyRadio .currentVol').text(currentVol);
        });

        $('#ohMyRadio .getNowPlaying').on('click', function(){
          pollStats(currentStationUrl, false);
        });

        // attach keybindings
        $(document).on('keypress', function(e){
          console.log();
          switch( e.which ) {
            case 32: /* [space] ~ Play/Pause */
              $(playPauseBtn).trigger('click');
              break;
            case 110: /* [n] ~ Next Station */
              $(nextBtn).trigger('click');
              break;
            case 112: /* [p] ~ Prev Station */
              $(prevBtn).trigger('click');
              break;
            case 43: /* [+] ~ Increase Volume */
              $(incrVolBtn).trigger('click');
              break;
            case 45: /* [-] ~ Decrease Volume */
              $(decrVolBtn).trigger('click');
              break;
          }
        });

        setInterval(function(){
          $('#ohMyRadio .getNowPlaying').trigger('click');
        }, 30000);

        // poll for basic stats
        function pollStats(url, isDiffStation){
          $.ajax({
            url: "http://vishaltelangre.com/projects/oh-my-radio/scprox.php",
            type: 'post',
            data: {
              url: url
            },
	    dataType: 'json',
            success: function (data) {
	      $('.currentSong').slideUp('slow').delay(500).replaceWith('<div class="currentSong">'+data.songTitle+'</div>').delay(500).slideDown('slow');
              animateSongTitle();
	      $('.currentListeners span').text("(" + data.currentListeners + ")");
            }
          });
          currentStationUrl = url;
        }
      });
    });
  </script>

  <section id="ohMyRadio">
    <div class="infoBar">
      Now Playing <button class="getNowPlaying" onclick="void(0)"> sync </button>
      <div class="currentSong">Silence...</div>
      <span class="currentListeners">Online Listeners: <span>1</span></span>
      <div class="stationInfo">Silent Station!</div>
    </div>
    <div class="controls">
      <button type="button" class="playPause" title="Play/Pause">Pause</button>
      <div class="seperator"></div>
      <button type="button" class="prev" title="Previous Station">&laquo;</button>
      <button type="button" class="next" title="Next Station">&raquo;</button>
      <div class="seperator"></div>
      <button type="button" class="incrVol" title="Increase Volume">+</button>
      <span class="volumeStatus">
        <span class="currentVol" title="Current Volume">10</span>%
      </span>
      <button type="button" class="decrVol" title="Decrease Volume">-</button>
    </div>
    <div class="controls-help">
      <span><code>Space</code>Play/Pause</span>
      <span><code>n</code>Next</span>
      <span><code>p</code>Prev</span>
      <span><code>+</code>Vol Up</span>
      <span><code>-</code>Vol Down</span>
    </div>
  </section>
  <footer id="footer">
    Copyright &copy; Vishal Telangre [ <a href="https://github.com/vishaltelangre/OhMyRadio">Fork on GitHub</a> ]
    <br>
    [ <a href="https://chrome.google.com/webstore/detail/ohmyradio/mahcbjpopcainjkjlfpgdbmifboeefap" target="_blank">Add to Chrome</a> ]
  </footer>
</body>
</html>